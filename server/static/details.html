<img ng-show="loading" class="center-block loading" src="/static/images/loader.gif" />

<div ng-show="!loading" class="panel panel-default">
	<div class="panel-heading">

		<span class="pull-right"> {{ log.created }} </span>
		<a ng-href="/#/{{ log.checksum }}/?view={{ visualization }}">{{ log.data.argv }}</a><span ng-if="name">: {{ name }}</span>
		<span class="paths" ng-repeat="path in paths">
		  <a ng-href="/#/{{ log.checksum }}/?view={{ visualization }}&id={{ path.path }}">{{ path.name }}
		  </a> {{ "(" + (path.percentage * 100).toFixed(2) + "%)" }} ->
		</span>

	</div>

	<p ng-if="currentProfiles.length == 0" class="lead text-center" style="padding-top: 15px">
		no profiles
	</p>

	<div class="row">
	  <div class="col-md-1">
	  </div>
	  <div class="col-md-10">
        <div class="row">
		  <span>Total time spent in this function: {{ (total_time * 100).toFixed(2) }}% self: {{ (self_time * 100).toFixed(2) }}%</span>
        </div>
        <div class="row" ng-if="root.cumulative_meta">
          Meta data (cumulative for this callsite):
          <span class="green">
            Jitted: {{ (root.green() * 100).toFixed(2) }}%
          </span>
          <span class="yellow">Warming up: {{ (root.yellow() * 100).toFixed(2) }}%</span>
          <span class="red">Interpreting: {{ (root.red() * 100).toFixed(2) }}%</span>
          <span class="blue">GC: {{ (root.gc() * 100).toFixed(2) }}%</span>
        </div>
	  </div>
	</div>
	<div ng-if="currentProfiles.length > 0" class="row">
		<div class="col-md-12">
			<table class="table table-hover">
				<thead>
					<tr>
						<th>name</th>
						<th>file</th>
						<th>% of parent</th>
						<th>% of total</th>
						<th>self</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="profile in currentProfiles" ng-class="{active: address==profile.address}">
						<td>
							<a ng-href="/#/{{ log.checksum }}/?id={{ profile.path }}&view={{ visualization }}">
								{{ profile.name }}
							</a>
						</td>
						<td>{{ profile.file }}:{{ profile.line }}</td>
						<td>{{ profile.times.toFixed(2) }}%</td>
						<td>{{ profile.total.toFixed(2) }}%</td>
						<td>{{ profile.self.toFixed(2) }}%</td>
					</tr>
				</tbody>
			</table>
		</div>

	</div>
		<div ng-if="currentProfiles.length > 0" class="row">
			<div class="btn-group" role="group" aria-label="...">
				<button type="button" class="btn btn-default"
						ng-click="visualizationChange('squares')"
						ng-class="{active: visualization=='squares'}"}>
					<span class="glyphicon glyphicon-th" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-default"
						ng-click="visualizationChange('flames')"
						ng-class="{active: visualization=='flames'}"}>
					<span class="glyphicon glyphicon-align-center" aria-hidden="true"></span>
				</button>
			</div>

			<div id="visualization"></div>
		</div>
</div>
