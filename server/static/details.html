<img ng-show="loading" class="center-block loading" src="/static/images/loader.gif" />

<div id="item" ng-show="!loading">

    <ol class="breadcrumb">
        <li>
            <a ng-href="/#/{{ log.checksum }}/?view={{ visualization }}">{{ log.data.argv }}</a>
            <span ng-if="name">: {{ name }}</span>
        </li>
        <li ng-repeat="path in paths">
            <a ng-href="/#/{{ log.checksum }}/?view={{ visualization }}&id={{ path.path }}">
                {{ path.name }} {{ "(" + (path.percentage * 100).toFixed(2) + "%)" }}
            </a>
        </li>
    </ol>

    <header>

        <div class="times">
            <span data-toggle="tooltip" title="Total time spent">
                <i class="fa fa-clock-o"></i>
                <strong>{{ (total_time * 100).toFixed(2) }}%</strong>
            </span>

            <span data-toggle="tooltip" title="Time spent in this function">
                <i class="fa fa-arrow-down"></i>
                <strong>{{ (self_time * 100).toFixed(2) }}%</strong>
            </span>
        </div>

        <div class="metadata" ng-if="root.cumulative_meta">
            <span class="label label-success">
                Jitted: {{ (root.green() * 100).toFixed(2) }}%
            </span>

            <span class="label label-warning" data-toggle="tooltip"
                  title="Blackhole: {{ (root.blackhole() * 100).toFixed(2) }}% tracing: {{ (root.tracing() * 100).toFixed(2) }}%">
                  Warming up: {{ (root.yellow() * 100).toFixed(2) }}%
            </span>

            <span class="label label-danger">
                Interpreting: {{ (root.red() * 100).toFixed(2) }}%
            </span>

            <span class="label label-info" data-toggle="tooltip"
                  title="Minor: {{ (root.gc_minor() * 100).toFixed(2) }}% major: {{ (root.gc_major() * 100).toFixed(2) }}%">
                  GC: {{ (root.gc() * 100).toFixed(2) }}%
            </span>
            <i class="fa fa-question-circle" data-toggle="tooltip" title="Meta data (cumulative for this callsite)"></i>
        </div>
    </header>

</div>


<div ng-show="!loading" class="panel panel-default">

    <p ng-if="currentProfiles.length == 0" class="lead text-center" style="padding-top: 15px">
        no profiles
    </p>

    <div ng-if="currentProfiles.length > 0" class="row">
        <div class="col-md-12">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>name</th>
                        <th>file</th>
                        <th>% of parent</th>
                        <th>% of total</th>
                        <th>self</th>
                    </tr>
                </thead>

                <tbody>
                    <tr ng-repeat="profile in currentProfiles" ng-class="{active: address==profile.address}">
                        <td>
                            <a ng-href="/#/{{ log.checksum }}/?id={{ profile.path }}&view={{ visualization }}">
                                {{ profile.name }}
                            </a>
                        </td>
                        <td>{{ profile.file }}:{{ profile.line }}</td>
                        <td>{{ profile.times.toFixed(2) }}%</td>
                        <td>{{ profile.total.toFixed(2) }}%</td>
                        <td>{{ profile.self.toFixed(2) }}%</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <div ng-if="currentProfiles.length > 0" class="row">
        <div class="btn-group" role="group" aria-label="...">
            <button type="button" class="btn btn-default"
                    ng-click="visualizationChange('squares')"
                    ng-class="{active: visualization=='squares'}"}>
                    <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
            </button>
            <button type="button" class="btn btn-default"
                    ng-click="visualizationChange('flames')"
                    ng-class="{active: visualization=='flames'}"}>
                    <span class="glyphicon glyphicon-align-center" aria-hidden="true"></span>
            </button>
        </div>

        <div id="visualization-data"></div>
        <div id="visualization"></div>
    </div>
</div>

